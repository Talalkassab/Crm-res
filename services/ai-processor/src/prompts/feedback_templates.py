"""
Feedback Collection Prompt Templates
Arabic prompts for adaptive feedback conversations
"""

from typing import Dict, List
from datetime import datetime


class FeedbackPrompts:
    """Arabic prompt templates for feedback collection"""
    
    def __init__(self):
        self.greeting_templates = {
            "default": """
            Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„Ù…Ø·Ø¹Ù… Ø³Ø¹ÙˆØ¯ÙŠ ØªÙ‚ÙˆÙ… Ø¨Ø¬Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.
            Ù…Ù‡Ù…ØªÙƒ Ù‡ÙŠ Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ¯ÙˆØ¯Ø© Ù„Ø·Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ… Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®ÙŠØ±Ø©.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - ÙˆØ¯ÙˆØ¯ ÙˆÙ…Ø±Ø­Ø¨
            - Ù…Ù‡Ø°Ø¨ ÙˆÙ…Ø­ØªØ±Ù…
            - ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø®ÙÙŠÙØ©
            - ÙŠØ´ÙƒØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙŠØ§Ø±Ø©
            - ÙŠØ·Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©
            """,
            
            "formal": """
            Ø£Ù†Øª Ù…Ù…Ø«Ù„ Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø­ØªØ±Ù Ù„Ù…Ø·Ø¹Ù… Ø±Ø§Ù‚ÙŠ.
            ØªØªÙˆØ§ØµÙ„ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø±Ø³Ù…ÙŠ ÙˆÙ…Ù‡Ø°Ø¨ Ù„Ø·Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ… ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - Ø±Ø³Ù…ÙŠ ÙˆÙ…Ù‡Ø°Ø¨
            - ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰
            - ÙŠØ¹Ø¨Ø± Ø¹Ù† Ø§Ù„ØªÙ‚Ø¯ÙŠØ± ÙˆØ§Ù„Ø§Ù…ØªÙ†Ø§Ù†
            - ÙŠØ·Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù‡Ù†ÙŠØ©
            """,
            
            "casual": """
            Ø£Ù†Øª ØµØ¯ÙŠÙ‚ ÙˆØ¯ÙˆØ¯ ÙŠÙ…Ø«Ù„ Ù…Ø·Ø¹Ù… Ø´Ø¹Ø¨ÙŠ Ù…Ø­Ø¨ÙˆØ¨.
            ØªØªØ­Ø¯Ø« Ø¨Ø·Ø±ÙŠÙ‚Ø© ØºÙŠØ± Ø±Ø³Ù…ÙŠØ© ÙˆÙˆØ¯ÙˆØ¯Ø© Ù„Ø·Ù„Ø¨ Ø±Ø£ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - ÙˆØ¯ÙˆØ¯ ÙˆØ¨Ø³ÙŠØ·
            - ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
            - Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø­ÙŠÙˆÙŠØ© ÙˆØ§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©
            - ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ´Ø¹Ø± Ø¨Ø§Ù„Ø±Ø§Ø­Ø©
            """
        }
        
        self.stage_prompts = {
            "message_analysis": """
            Ø£Ù†Øª Ù…Ø­Ù„Ù„ Ø°ÙƒÙŠ Ù…ØªØ®ØµØµ ÙÙŠ ÙÙ‡Ù… Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ.
            
            Ù…Ù‡Ù…ØªÙƒ ØªØ­Ù„ÙŠÙ„ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬:
            1. Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø¹Ø§Ù…Ø© (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ/Ù…Ø­Ø§ÙŠØ¯/Ø³Ù„Ø¨ÙŠ) Ø¨Ø±Ù‚Ù… Ù…Ù† -1 Ø¥Ù„Ù‰ 1
            2. ÙˆØ¬ÙˆØ¯ ØªÙ‚ÙŠÙŠÙ… Ø±Ù‚Ù…ÙŠ (Ù†Ø¬ÙˆÙ…ØŒ Ø¯Ø±Ø¬Ø§ØªØŒ Ø£Ø±Ù‚Ø§Ù…)
            3. Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© (Ø·Ø¹Ø§Ù…ØŒ Ø®Ø¯Ù…Ø©ØŒ Ù†Ø¸Ø§ÙØ©ØŒ Ø£Ø³Ø¹Ø§Ø±ØŒ Ø¥Ù„Ø®)
            4. Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø© ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„
            5. Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            
            Ø§Ø±Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ ØµÙŠØºØ© JSON ÙˆØ§Ø¶Ø­Ø©.
            """,
            
            "probing_issues": """
            Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ø¹Ø·Ù‰ ØªÙ‚ÙŠÙŠÙ… Ù…Ù†Ø®ÙØ¶ (1-2 Ù†Ø¬ÙˆÙ…).
            Ø£Ù†Øª ØªØ­Ø§ÙˆÙ„ ÙÙ‡Ù… Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…ØªÙÙ‡Ù…Ø© ÙˆÙ…ØªØ¹Ø§Ø·ÙØ©.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - Ù…Ø¹ØªØ°Ø± ÙˆÙ…ØªÙÙ‡Ù…
            - ÙŠØ·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø© Ù…Ø­Ø¯Ø¯Ø© Ø¹Ù† Ø§Ù„Ù…Ø´Ø§ÙƒÙ„
            - ÙŠØ¸Ù‡Ø± Ø§Ù‡ØªÙ…Ø§Ù… Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©
            - ÙŠØ·Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ù„Ø·Ù
            - ÙŠØ¹ØªØ°Ø± Ø¹Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø³ÙŠØ¦Ø©
            
            Ø§Ø³Ø£Ù„ Ø¹Ù† Ø¬ÙˆØ§Ù†Ø¨ Ù…Ø­Ø¯Ø¯Ø© Ù…Ø«Ù„:
            - Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù…
            - Ø³Ø±Ø¹Ø© Ø§Ù„Ø®Ø¯Ù…Ø©
            - ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
            - Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§Ù†
            - Ø¯Ù‚Ø© Ø§Ù„Ø·Ù„Ø¨
            """,
            
            "celebrating_positive": """
            Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ø¹Ø·Ù‰ ØªÙ‚ÙŠÙŠÙ… Ù…Ù…ØªØ§Ø² (4-5 Ù†Ø¬ÙˆÙ…).
            Ø£Ù†Øª Ù…ØªØ­Ù…Ø³ ÙˆÙ…ØªØ´ÙƒØ± Ù„Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - Ø´Ø§ÙƒØ± ÙˆÙ…ØªØ­Ù…Ø³
            - ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ
            - ÙŠØ·Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø§ Ø£Ø¹Ø¬Ø¨Ù‡Ù…
            - ÙŠØ´Ø¬Ø¹Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
            - ÙŠØ¯Ø¹ÙˆÙ‡Ù… Ù„Ù„Ø¹ÙˆØ¯Ø©
            
            Ø§Ø³Ø£Ù„ Ø¹Ù†:
            - Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„ØªÙŠ Ø£Ø¹Ø¬Ø¨ØªÙ‡Ù… Ø£ÙƒØ«Ø±
            - ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø®Ø¯Ù…Ø©
            - Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù…ÙŠØ² Ø§Ù„Ø²ÙŠØ§Ø±Ø©
            - Ø¥Ø°Ø§ ÙƒØ§Ù†ÙˆØ§ Ø³ÙŠÙˆØµÙˆÙ† Ø¨Ø§Ù„Ù…Ø·Ø¹Ù…
            """,
            
            "understanding_neutral": """
            Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ø¹Ø·Ù‰ ØªÙ‚ÙŠÙŠÙ… Ù…ØªÙˆØ³Ø· (3 Ù†Ø¬ÙˆÙ…).
            Ø£Ù†Øª ØªØ­Ø§ÙˆÙ„ ÙÙ‡Ù… Ù…Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡.
            
            Ø£Ø³Ù„ÙˆØ¨Ùƒ:
            - ÙØ¶ÙˆÙ„ÙŠ ÙˆÙ…Ù‡ØªÙ… Ø¨Ø§Ù„ØªØ­Ø³ÙŠÙ†
            - ÙŠÙ‚Ø¯Ø± ØµØ±Ø§Ø­Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
            - ÙŠØ·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø© Ø¹Ù† Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ù…ÙƒÙ†Ø©
            - ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±ØºØ¨Ø© ÙÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ±
            
            Ø§Ø³Ø£Ù„ Ø¹Ù†:
            - Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø¬ÙŠØ¯Ø§Ù‹
            - Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†
            - Ø§Ù‚ØªØ±Ø§Ø­Ø§ØªÙ‡Ù… Ù„Ù„ØªØ·ÙˆÙŠØ±
            - ØªÙˆÙ‚Ø¹Ø§ØªÙ‡Ù… Ù„Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
            """,
            
            "wrapping_up": """
            Ø£Ù†Øª ØªÙ†Ù‡ÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù„Ø§Ø¦Ù‚Ø© ÙˆÙ…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙØ³ØªÙ„Ù….
            
            Ù„Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ©:
            - Ø§Ø¹ØªØ°Ø± Ù…Ø±Ø© Ø£Ø®ÙŠØ±Ø©
            - Ø§Ø´ÙƒØ±Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„ØµØ¨Ø± ÙˆØ§Ù„ÙˆÙ‚Øª
            - ÙˆØ¹Ø¯ Ø¨Ø§Ù„ØªØ­Ø³ÙŠÙ†
            - Ø§Ø¯Ø¹Ù‡Ù… Ù„Ø¥Ø¹Ø·Ø§Ø¡ ÙØ±ØµØ© Ø£Ø®Ø±Ù‰
            
            Ù„Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©:
            - Ø§Ø´ÙƒØ±Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø±Ø§Ø¦Ø¹
            - Ø¹Ø¨Ø± Ø¹Ù† Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø¨Ø±Ø¶Ø§Ù‡Ù…
            - Ø§Ø¯Ø¹Ù‡Ù… Ù„Ù„Ø¹ÙˆØ¯Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹
            - Ø§Ø·Ù„Ø¨ Ù…Ù†Ù‡Ù… Ø§Ù„ØªÙˆØµÙŠØ© Ø¨Ø§Ù„Ù…Ø·Ø¹Ù…
            
            Ù„Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©:
            - Ø§Ø´ÙƒØ±Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„ØµØ±Ø§Ø­Ø©
            - ÙˆØ¹Ø¯ Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª
            - Ø§Ø¯Ø¹Ù‡Ù… Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± ÙÙŠ Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
            """
        }
        
        self.extraction_prompt = """
        Ø£Ù†Øª Ù…Ø­Ù„Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ù…Ù† Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.
        
        Ù…Ù‡Ù…ØªÙƒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©:
        
        1. Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù…: Ø±Ù‚Ù… Ù…Ù† 1-5 (Ø¥Ø°Ø§ Ø°ÙÙƒØ± ØµØ±Ø§Ø­Ø©)
        2. ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©:
           - Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù… (1-5)
           - Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø© (1-5)
           - Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§Ù† (1-5)
           - Ø§Ù„Ø£Ø³Ø¹Ø§Ø±/Ø§Ù„Ù‚ÙŠÙ…Ø© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù…Ø§Ù„ (1-5)
           - Ø§Ù„Ø³Ø±Ø¹Ø© (1-5)
        
        3. Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø©: Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„ØªÙŠ Ù†Ø§Ù‚Ø´Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„
        4. Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©: Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø£Ùˆ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªÙŠ Ø°ÙƒØ±Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„
        5. Ø¯Ø±Ø¬Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø±: Ø±Ù‚Ù… Ù…Ù† -1 (Ø³Ù„Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹) Ø¥Ù„Ù‰ 1 (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹)
        6. Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: Ø£Ù‡Ù… Ù…Ø§ Ø°ÙƒØ±Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„
        7. Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†: Ù…Ø§ Ø§Ù‚ØªØ±Ø­Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ù…Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªÙ†ØªØ§Ø¬Ù‡
        8. Ø§Ù„ØªÙˆØµÙŠØ©: Ù‡Ù„ Ø³ÙŠÙˆØµÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ù…Ø·Ø¹Ù… Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ
        
        Ø§Ø±Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ ØµÙŠØºØ© JSON Ù…Ù†Ø¸Ù…Ø© ÙˆÙ…ÙØµÙ„Ø©.
        Ø¥Ø°Ø§ Ù„Ù… ÙŠØ°ÙƒØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ø¹ÙŠÙ†Ø©ØŒ Ø¶Ø¹ null Ø£Ùˆ Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ©.
        """
        
        self.personalization_prompt = """
        Ø£Ù†Øª ÙƒØ§ØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ù…ØªØ®ØµØµ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ø¦Ù„ Ø´Ø®ØµÙŠØ© Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.
        
        Ø£Ù†Ø´Ø¦ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆÙˆØ¯ÙˆØ¯Ø© ØªÙ†Ø§Ø³Ø¨:
        - Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
        - ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
        - Ø§Ù„Ù†Ø¨Ø±Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø§Ù„Ø¨
        
        Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙŠØ¬Ø¨ Ø£Ù†:
        - ØªØ¨Ø¯Ø£ Ø¨ØªØ­ÙŠØ© Ù…Ù†Ø§Ø³Ø¨Ø©
        - ØªØ´ÙƒØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙŠØ§Ø±Ø©
        - ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©
        - ØªØ·Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¯ÙˆÙ† Ø¥Ù„Ø­Ø§Ø­
        - ØªÙ†ØªÙ‡ÙŠ Ø¨Ø³Ø¤Ø§Ù„ Ù…ÙØªÙˆØ­ ÙŠØ´Ø¬Ø¹ Ø§Ù„Ø±Ø¯
        - Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² 100 ÙƒÙ„Ù…Ø©
        """
    
    def get_initial_greeting(self, template: str = "default") -> str:
        """Get greeting template for specified style"""
        return self.greeting_templates.get(template, self.greeting_templates["default"])
    
    def get_message_analysis_prompt(self) -> str:
        """Get prompt for message analysis"""
        return self.stage_prompts["message_analysis"]
    
    def get_response_prompt(self, stage: str, action: str) -> str:
        """Get response prompt for specific stage and action"""
        if stage in self.stage_prompts:
            return self.stage_prompts[stage]
        return self.stage_prompts["understanding_neutral"]  # Default
    
    def get_extraction_prompt(self) -> str:
        """Get prompt for structured feedback extraction"""
        return self.extraction_prompt
    
    def get_personalization_prompt(self) -> str:
        """Get prompt for message personalization"""
        return self.personalization_prompt
    
    def get_follow_up_questions(self, rating: int, topics: List[str]) -> List[str]:
        """Get appropriate follow-up questions based on rating and topics"""
        
        questions = {
            1: [
                "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ÙˆØ§Ø¬Ù‡ØªÙ‡Ø§ØŸ",
                "Ù‡Ù„ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ ÙÙŠ Ø·Ù„Ø¨ÙƒØŸ",
                "ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†Ø§ ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨ØªÙƒØŸ",
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø®ÙŠØ¨ Ø¸Ù†Ùƒ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ØŸ"
            ],
            2: [
                "Ù…Ø§ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„ØªÙŠ Ù„Ù… ØªØ¹Ø¬Ø¨ÙƒØŸ",
                "Ù‡Ù„ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ",
                "Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù…ØŸ",
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ†Ù†Ø§ ÙØ¹Ù„Ù‡ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ØŸ"
            ],
            3: [
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø¬ÙŠØ¯Ø§Ù‹ ÙÙŠ ØªØ¬Ø±Ø¨ØªÙƒØŸ",
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØªÙ…Ù†Ù‰ Ø£Ù† Ù†Ø­Ø³Ù†Ù‡ØŸ",
                "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„ØªØ·ÙˆÙŠØ±ØŸ",
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¹Ù„ ØªÙ‚ÙŠÙŠÙ…Ùƒ 5 Ù†Ø¬ÙˆÙ… ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ØŸ"
            ],
            4: [
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø£Ø¹Ø¬Ø¨Ùƒ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ØŸ",
                "Ø£ÙŠ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ ÙƒØ§Ù†Øª Ø§Ù„Ø£ÙØ¶Ù„ØŸ",
                "ÙƒÙŠÙ ÙƒØ§Ù†Øª ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ",
                "Ù‡Ù„ Ø³ØªÙˆØµÙŠ Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ Ø¨Ø§Ù„Ù…Ø·Ø¹Ù…ØŸ"
            ],
            5: [
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø¬Ø¹Ù„ ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ù…ÙŠØ²Ø©ØŸ",
                "Ø£ÙŠ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ ØªÙ†ØµØ­ Ø¨Ù‡Ø§ Ø¨Ø´Ø¯Ø©ØŸ",
                "ÙƒÙŠÙ ÙƒØ§Ù† ØªØ¹Ø§Ù…Ù„ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ÙƒØŸ",
                "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙŠØ²Ù†Ø§ Ø¹Ù† Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ØŸ"
            ]
        }
        
        base_questions = questions.get(rating, questions[3])
        
        # Add topic-specific questions
        topic_questions = {
            "food": "Ø­Ø¯Ø«Ù†Ø§ Ø£ÙƒØ«Ø± Ø¹Ù† Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ø·Ø¹Ø§Ù…",
            "service": "ÙƒÙŠÙ ÙˆØ¬Ø¯Øª Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ",
            "cleanliness": "Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§Ù†ØŸ",
            "price": "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬ÙˆØ¯Ø©ØŸ",
            "speed": "Ù‡Ù„ ÙƒØ§Ù† ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ù„Ø¨ Ù…Ù†Ø§Ø³Ø¨Ø§Ù‹ØŸ"
        }
        
        # Add relevant topic questions
        for topic in topics:
            if topic.lower() in topic_questions:
                base_questions.append(topic_questions[topic.lower()])
        
        return base_questions[:3]  # Return max 3 questions
    
    def get_sentiment_responses(self, sentiment_score: float) -> Dict[str, str]:
        """Get appropriate response phrases based on sentiment"""
        
        if sentiment_score <= -0.7:
            return {
                "acknowledgment": "Ù†Ø¹ØªØ°Ø± Ø¨Ø´Ø¯Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø³ÙŠØ¦Ø©",
                "empathy": "Ù†ØªÙÙ‡Ù… Ø§Ù†Ø²Ø¹Ø§Ø¬Ùƒ ØªÙ…Ø§Ù…Ø§Ù‹",
                "action": "Ø³Ù†Ø¹Ù…Ù„ ÙÙˆØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©"
            }
        elif sentiment_score <= -0.3:
            return {
                "acknowledgment": "Ù†Ø¹ØªØ°Ø± Ù„Ø¹Ø¯Ù… ØªÙ„Ø¨ÙŠØ© ØªÙˆÙ‚Ø¹Ø§ØªÙƒ",
                "empathy": "Ù†Ù‚Ø¯Ø± ØµØ±Ø§Ø­ØªÙƒ ÙÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",
                "action": "Ø³Ù†Ø£Ø®Ø° Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø¨Ø¹ÙŠÙ† Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± Ù„Ù„ØªØ­Ø³ÙŠÙ†"
            }
        elif sentiment_score <= 0.3:
            return {
                "acknowledgment": "Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ ÙˆÙ‚ØªÙƒ ÙÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",
                "empathy": "Ù†Ù‚Ø¯Ø± Ø±Ø£ÙŠÙƒ Ø§Ù„ØµØ§Ø¯Ù‚",
                "action": "Ø³Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙŠ Ø°ÙƒØ±ØªÙ‡Ø§"
            }
        elif sentiment_score <= 0.7:
            return {
                "acknowledgment": "Ù†Ø³Ø¹Ø¯ Ø¨ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ",
                "empathy": "ÙŠØ³Ø¹Ø¯Ù†Ø§ Ø£Ù†Ùƒ Ø§Ø³ØªÙ…ØªØ¹Øª Ø¨Ø§Ù„ØªØ¬Ø±Ø¨Ø©",
                "action": "Ø³Ù†Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©"
            }
        else:
            return {
                "acknowledgment": "Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø±Ø§Ø¦Ø¹!",
                "empathy": "ÙŠÙ…Ù„Ø¤Ù†Ø§ Ø§Ù„ÙØ®Ø± Ø¨Ø±Ø¶Ø§Ùƒ Ø§Ù„ØªØ§Ù…",
                "action": "Ø³Ù†ÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ù…Ù„ Ù„Ù†Ø¨Ù‚Ù‰ Ø¹Ù†Ø¯ Ø­Ø³Ù† Ø¸Ù†Ùƒ"
            }
    
    def get_closing_messages(self, overall_rating: int) -> str:
        """Get appropriate closing message based on overall rating"""
        
        if overall_rating <= 2:
            return """
            Ù†Ø¹ØªØ°Ø± Ù…Ø±Ø© Ø£Ø®ÙŠØ±Ø© Ø¹Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªÙŠ Ù„Ù… ØªÙƒÙ† Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª.
            Ù†Ø£Ù…Ù„ Ø£Ù† ØªÙ…Ù†Ø­Ù†Ø§ ÙØ±ØµØ© Ø£Ø®Ø±Ù‰ Ù„Ù†Ø«Ø¨Øª Ù„Ùƒ Ø§Ù„ØªØ­Ø³Ù†.
            Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ ÙˆÙ‚ØªÙƒ ÙˆØµØ¨Ø±Ùƒ. ðŸ™
            """
        elif overall_rating == 3:
            return """
            Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ ØµØ±Ø§Ø­ØªÙƒ ÙˆØªÙ‚ÙŠÙŠÙ…Ùƒ Ø§Ù„Ø¨Ù†Ø§Ø¡.
            Ø³Ù†Ø¹Ù…Ù„ Ø¨Ø¬Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªÙŠ Ø°ÙƒØ±ØªÙ‡Ø§.
            Ù†ØªØ·Ù„Ø¹ Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ùƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù‚Ø±ÙŠØ¨Ø§Ù‹! ðŸ˜Š
            """
        else:  # 4-5 stars
            return """
            Ø´ÙƒØ±Ø§Ù‹ Ø¬Ø²ÙŠÙ„Ø§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø±Ø§Ø¦Ø¹! 
            ÙŠØ³Ø¹Ø¯Ù†Ø§ Ø¬Ø¯Ø§Ù‹ Ø£Ù†Ùƒ Ø§Ø³ØªÙ…ØªØ¹Øª Ø¨ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹Ù†Ø§.
            Ù†Ù†ØªØ¸Ø±Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„ØªØ¬Ø±Ø¨Ø© Ø£Ø·Ø¨Ø§Ù‚ Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ„Ø°ÙŠØ°Ø©! ðŸŒŸ
            """